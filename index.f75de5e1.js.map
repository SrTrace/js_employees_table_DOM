{"mappings":"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","sources":["src/scripts/main.js"],"sourcesContent":["'use strict';\n\n'use strict';\n\nconst table = document.querySelector('table');\nconst tableHeads = document.querySelectorAll('thead th');\nconst tableRows = document.querySelectorAll('tbody tr');\n// for asc order sortDirections is 1, otherwise will be -1\nconst sortDirections = Array(tableHeads.length).fill(-1);\n\naddFormToPage();\n\ntableHeads.forEach((head, index) => {\n  head.addEventListener('click', (e) => {\n    const sortValue = head.textContent;\n\n    sortDirections[index] = setSortDirection(index);\n    sortTable(sortValue, index, sortDirections[index]);\n  });\n});\n\ntable.tBodies[0].addEventListener('click', (e) => {\n  if (e.target && e.target.nodeName === 'TD') {\n    const row = e.target.parentElement;\n    const rows = table.tBodies[0].getElementsByTagName('tr');\n    const prevActiveRowIndex = [...rows].findIndex((r) => {\n      return r.classList.contains('active');\n    });\n\n    if (prevActiveRowIndex !== -1) {\n      rows[prevActiveRowIndex].classList.remove('active');\n    }\n    row.classList.add('active');\n  }\n});\n\nfunction addFormToPage() {\n  const form = createForm();\n\n  const inputsFragment = createInputsFragment();\n\n  const submitBtn = createButton('Save to table');\n\n  form.appendChild(inputsFragment);\n  form.appendChild(submitBtn);\n\n  // form.addEventListener('submit', (e) => {\n  submitBtn.addEventListener('click', (e) => {\n    e.preventDefault();\n\n    if (isFormDataValid(form)) {\n      insertDataToTable(form);\n\n      showNotification(\n        10,\n        10,\n        'Success',\n        'New employee is successfully added to the table!',\n        'success',\n      );\n      form.reset();\n    }\n  });\n\n  document.body.appendChild(form);\n}\n\nfunction isFormDataValid(formData) {\n  const data = new FormData(formData);\n  let isValid = true;\n  let message = '';\n\n  for (const [inputName, value] of data) {\n    if (inputName === 'name' && value.length < 4) {\n      message = 'Name should have more then 3 letters';\n      isValid = false;\n    }\n\n    if (inputName === 'age' && (+value < 18 || +value > 90)) {\n      if (message.length > 0) {\n        message = message + ', ' + 'not properly age!';\n      } else {\n        message = 'Not properly age!';\n      }\n      isValid = false;\n    }\n\n    if (!value.length || value.trim() === '') {\n      message = 'Empty field not valid!';\n      isValid = false;\n    }\n  }\n\n  if (!isValid) {\n    showNotification(10, 10, 'Error', message, 'error');\n  }\n\n  return isValid;\n}\n\nfunction showNotification(posTop, posRight, title, description, type) {\n  const notification = document.createElement('div');\n\n  notification.classList.add('notification', type);\n  notification.setAttribute('data-qa', 'notification');\n\n  notification.innerHTML = `\n    <h2 class = 'title'>${title}</h2>\n    <p>${description}</p>\n  `;\n\n  notification.style.top = `${posTop}px`;\n  notification.style.right = `${posRight}px`;\n  document.body.append(notification);\n\n  setTimeout(() => {\n    notification.remove();\n  }, 2000);\n}\n\n// #region creating Form\n\nfunction insertDataToTable(form) {\n  const formData = new FormData(form);\n  const newRow = document.createElement('tr');\n  const numberFormatter = new Intl.NumberFormat('en-US');\n\n  tableHeads.forEach((head) => {\n    const inputName = head.textContent.toLowerCase();\n    const newCell = document.createElement('td');\n    let cellValue = formData.get(inputName);\n\n    if (inputName === 'salary') {\n      cellValue = `$${numberFormatter.format(cellValue)}`;\n    }\n\n    newCell.textContent = cellValue;\n    newRow.appendChild(newCell);\n  });\n\n  table.tBodies[0].appendChild(newRow);\n}\n\nfunction createInputsFragment() {\n  const inputsFragment = document.createDocumentFragment();\n\n  tableHeads.forEach((head, i) => {\n    const label = createLabel(head.innerText);\n    const inputName = head.innerText.toLowerCase();\n\n    if (inputName === 'office') {\n      const select = createSelect(inputName, i);\n\n      label.appendChild(select);\n    } else {\n      const input = createInput(inputName);\n\n      label.appendChild(input);\n    }\n    inputsFragment.appendChild(label);\n  });\n\n  return inputsFragment;\n}\n\nfunction createButton(text) {\n  const submitBtn = document.createElement('button');\n\n  submitBtn.innerText = `${text}`;\n\n  return submitBtn;\n}\n\nfunction createInput(inputName) {\n  const input = document.createElement('input');\n\n  input.setAttribute('name', inputName);\n  input.setAttribute('data-qa', inputName);\n  input.setAttribute('required', true);\n\n  if (inputName === 'salary' || inputName === 'age') {\n    input.setAttribute('type', 'number');\n  }\n\n  return input;\n}\n\nfunction createSelect(inputName, columnIndex) {\n  const select = document.createElement('select');\n\n  select.setAttribute('name', inputName);\n  select.setAttribute('data-qa', inputName);\n  select.setAttribute('required', true);\n\n  const optionValues = getUniqueValuesFromTableColumn(columnIndex);\n\n  optionValues.forEach((value, index) => {\n    const option = document.createElement('option');\n\n    option.setAttribute('value', value);\n    option.textContent = value;\n\n    if (index === 0) {\n      option.setAttribute('selected', true);\n    }\n\n    select.appendChild(option);\n  });\n\n  return select;\n}\n\nfunction createLabel(text) {\n  const label = document.createElement('label');\n\n  label.innerHTML = `${text}: `;\n\n  return label;\n}\n\nfunction createForm() {\n  const form = document.createElement('form');\n\n  form.classList.add('new-employee-form');\n\n  return form;\n}\n\nfunction getUniqueValuesFromTableColumn(columnIndex) {\n  const columnData = [...tableRows].map(\n    (row) => row.cells[columnIndex].textContent,\n  );\n\n  const uniqueData = [...new Set(columnData)];\n\n  return uniqueData;\n}\n\n// #endregion\n\n// #region sorting by clicking\nfunction setSortDirection(index) {\n  for (let i = 0; i < sortDirections.length; i++) {\n    if (i !== index) {\n      sortDirections[i] = -1;\n    } else {\n      sortDirections[i] *= -1;\n    }\n  }\n\n  return sortDirections[index];\n}\n\nfunction sortTable(sortValue, columnIndex, sortDirection) {\n  const rows = [...table.tBodies[0].children];\n\n  rows.sort((a, b) => sortBy(a, b, sortValue, columnIndex, sortDirection));\n\n  const sortedFragment = document.createDocumentFragment();\n\n  rows.forEach((row) => sortedFragment.appendChild(row));\n  table.tBodies[0].appendChild(sortedFragment);\n}\n\nfunction sortBy(a, b, sortValue, columnIndex, sortDirection) {\n  const cellA = a.cells[columnIndex].innerText;\n  const cellB = b.cells[columnIndex].innerText;\n\n  switch (sortValue) {\n    case 'Name':\n    case 'Position':\n    case 'Office':\n      return cellA.localeCompare(cellB) * sortDirection;\n    case 'Age':\n      return (+cellA - +cellB) * sortDirection;\n    case 'Salary':\n      return (parseNumber(cellA) - parseNumber(cellB)) * sortDirection;\n    default:\n      return 0;\n  }\n}\n\nfunction parseNumber(str) {\n  const strNumbers = str.replace(/,/g, '').slice(1);\n  const number = Number(strNumbers);\n\n  return isNaN(number) ? 0 : number;\n}\n\n// #endregion\n"],"names":[],"version":3,"file":"index.f75de5e1.js.map","sourceRoot":"/__parcel_source_root/"}